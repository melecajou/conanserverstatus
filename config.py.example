import os
from dotenv import load_dotenv

# Load environment variables from a .env file
load_dotenv()

# Bot language. Options: 'en' for English, 'pt_BR' for Brazilian Portuguese.
LANGUAGE = "pt_BR"

# Your Discord Bot's Token.
# It is strongly recommended to set this in a .env file.
# NEVER share or commit this token to public repositories.
STATUS_BOT_TOKEN = os.getenv("STATUS_BOT_TOKEN")

# Role ID to be assigned to registered users.
# Set to None or 0 to disable this feature.
REGISTERED_ROLE_ID = 123456789012345678

# Killfeed Global Configuration
# Paths to the ranking and NPC spawns databases.
KILLFEED_RANKING_DB = "data/killfeed/ranking.db"
KILLFEED_SPAWNS_DB = "data/killfeed/spawns.db"
KILLFEED_STATE_FILE = "data/killfeed/ranking_state.json"

# Unified Ranking Configuration (Optional)
# Aggregates scores from multiple servers into a single leaderboard.
KILLFEED_UNIFIED_RANKINGS = [
    {
        "enabled": False,
        "title": "üèÜ Cluster PvP Ranking",
        "channel_id": 123456789012345678,
        "servers_to_include": ["My Server 1 (Exiles)", "My Server 2 (Siptah)"],
        "update_interval": 300,
    }
]

# Cluster Status Configuration
# Consolidates status from all servers into a single channel.
CLUSTER_STATUS = {
    "ENABLED": False,
    "CHANNEL_ID": 123456789012345678
}

# Guild Sync Configuration
# Automatically manages Discord roles based on in-game guild membership.
GUILD_SYNC = {
    "ENABLED": False,
    "SERVER_ID": 123456789012345678, # Your Discord Server ID
    "ROLE_PREFIX": "üõ°Ô∏è ",          # Prefix for guild roles
    "CLEANUP_EMPTY_ROLES": True     # Delete role if guild becomes empty
}

# Marketplace Configuration
# Enables asynchronous P2P trading using virtual currency.
MARKETPLACE = {
    "ENABLED": False,
    "CURRENCY_ITEM_ID": 10000000, # Template ID of the in-game currency item
    "CURRENCY_NAME": "Ecos Coin", # Friendly name for the virtual currency
    "SYNC_WAIT_SECONDS": 5,       # Seconds to wait for game.db to sync before processing
}

# Trade / Shop Configuration
# Define items that players can buy in-game using !buy <key>
# price_id is the template ID of the item used as currency (e.g. Gold/Silver)
TRADE_ITEMS = {
    "pocao": {
        "item_id": 12345,
        "quantity": 1,
        "price_id": 11066,
        "price_amount": 50,
        "price_label": "Moedas de Ouro",
        "label": "Po√ß√£o de Cura Especial"
    },
    "kit": {
        "item_id": 54321,
        "quantity": 1,
        "price_id": 11066,
        "price_amount": 100,
        "price_label": "Moedas de Ouro",
        "label": "Kit de Sobreviv√™ncia"
    }
}

# List of servers to monitor.
# You can add as many servers as you want, just copy the dictionary block.
SERVERS = [
        {
            "NAME": "My Server 1 (Exiles)",
            "ALIAS": "Exiles",
            "SERVER_IP" : "127.0.0.1",
            "RCON_PORT" : 25575,
            # It is strongly recommended to set the RCON password in a .env file using RCON_PASS_0, RCON_PASS_1, etc.
            "RCON_PASS" : os.getenv("RCON_PASS_0"),
            "STATUS_CHANNEL_ID" : 123456789012345678,
            "DB_PATH": "/path/to/your/server1/ConanSandbox/Saved/game.db",
            "LOG_PATH": "", # Optional: Absolute path to the ConanSandbox.log file for this server to show system stats. e.g., "/path/to/server/ConanSandbox/Saved/Logs/ConanSandbox.log",

            # Optional: Per-server database and log files.
            "PLAYER_DB_PATH": "data/playertracker_server1.db",
            # "LOG_FILE": "logs/rewards_server1.log",

            "KILLFEED_CONFIG": {
                "ENABLED": True,
                "CHANNEL_ID": 123456789012345678,
                "RANKING_CHANNEL_ID": 123456789012345679,
                "LAST_EVENT_FILE": "data/killfeed/last_event_server1.txt",
                "POLL_INTERVAL": 20,
                "RANKING_UPDATE_INTERVAL": 300,
                "PVP_ONLY": False
            },

            "REWARD_CONFIG": {
                "ENABLED": True,
                # INTERVALS_MINUTES allows different reward intervals based on VIP level.
                # 0 is the default level.
                "INTERVALS_MINUTES": {
                    0: 60,  # Level 0 (Default): Reward every 60 minutes
                    1: 30,  # Level 1 (VIP): Reward every 30 minutes
                    2: 15   # Level 2 (Super VIP): Reward every 15 minutes
                },
                "REWARD_ITEM_ID": 10000000,
                "REWARD_QUANTITY": 1
            }
        },
        {
            "NAME": "My Server 2 (Siptah)", 
            "SERVER_IP": "127.0.0.1",
            "RCON_PORT": 25576,
            "RCON_PASS": os.getenv("RCON_PASS_1"),
            "STATUS_CHANNEL_ID": 987654321098765432,
            "DB_PATH": "", # Optional: Absolute path to the game.db file for this server to show player levels. e.g., "/path/to/server/ConanSandbox/Saved/game.db",
            # "LOG_PATH": "", # Optional: Absolute path to the ConanSandbox.log file for this server to show system stats. e.g., "/path/to/server/ConanSandbox/Saved/Logs/ConanSandbox.log",
            "REWARD_CONFIG": {
                "ENABLED": False
            }
        },
        {
            "NAME": "My Server 3 (PvP)",
            "SERVER_IP": "127.0.0.1",
            "RCON_PORT": 25577,
            "RCON_PASS": os.getenv("RCON_PASS_2"),
            "STATUS_CHANNEL_ID": 112233445566778899,
            "DB_PATH": "/path/to/your/pvp_server/ConanSandbox/Saved/game.db",
            
            # --- Advanced Features Example ---

            "ANNOUNCEMENTS": {
                "ENABLED": True,
                "CHANNEL_ID": 112233445566778899,
                "TIMEZONE": "America/Sao_Paulo", # Example: America/New_York, Europe/London
                "SCHEDULE": [
                    {
                        "DAY": "Wednesday", # Options: Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, Sunday
                        "HOUR": 19, # 0-23
                        "MESSAGE": "üì¢ Double XP is now active on the PvP server!"
                    },
                    {
                        "DAY": "Sunday",
                        "HOUR": 0,
                        "MESSAGE": "üì¢ Double Farm rates are now active on the PvP server!"
                    }
                ]
            },

            "BUILDING_WATCHER": {
                "ENABLED": True,
                "CHANNEL_ID": 223344556677889900,
                "SQL_PATH": "/home/steam/bots/ConanServerStatus/sql/buildings.sql", # Must be an absolute path
                "DB_BACKUP_PATH": "/path/to/your/pvp_server/ConanSandbox/Saved/game_backup_1.db", # Must be an absolute path to a backup
                "BUILD_LIMIT": 2000
            },

            "WARP_CONFIG": {
                "ENABLED": True,
                "COOLDOWN_MINUTES": 5,
                "HOME_ENABLED": True,
                "HOME_COOLDOWN_MINUTES": 15,
                "SETHOME_COOLDOWN_MINUTES": 5,
                "LOCATIONS": {
                    "hub": "10000 20000 5000",
                    "arena": "-5000 10000 2000"
                }
            },

            "INACTIVITY_REPORT": {
                "ENABLED": False,
                "DAYS": 15,
                "CHANNEL_ID": 123456789012345678,
                "SQL_PATH": "/home/steam/bots/ConanServerStatus/sql/inactive_structures.sql"
            }
        }
]